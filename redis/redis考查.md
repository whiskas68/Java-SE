# redis考查

关键字：

**缓存问题-雪崩，穿透，击穿  布隆过滤器；RDB/AOF备份和恢复；集群**





## 数据结构

**字符串-String**，redis对kv操作效率高，可以用作计数器，统计在线人数；由于string类型是二进制存储安全，可以用作存储图片或视频。

**哈希-Hash**，存放对象的基本属性，比如用户信息，商品信息

**列表-List**，用于实现消息队列，或使用range命令实现分页查询功能。

**集合-Set**，用作去重功能，比如用户名不能重复。

**有序集合-ZSet**，有序集合，可以实现范围查找，排行榜或topN功能。

ZSet，用跳表来实现的。

## 雪崩

大面积的缓存失效，打穿数据库。

解决方式：

1. 随机设置失效时间，保证数据不再同一时间失效
2. 集群部署redis，将热点数据均匀分布在不同的实例上，避免全部失效
3. 设置热点数据永不过期，有更新操作在更新缓存



## 穿透

用户不断的发起一个不存在（缓存和数据库）的数据请求，导致数据库压力过大，进而击垮数据库

解决方式：

1. 增加参数的校验
2. 设置IP黑名单（每秒访问次数超过阈值的IP），增加人机验证判断
3. 布隆过滤器



## 击穿

对于一个热点的Key，在大并发的情况下，当key在发生失效的时候，持续的并发直接击穿缓存，请求到数据库上。

解决方法：

1. 设置热点数据永不过期
2. 增加互斥锁



## 布隆过滤器

待续





## RDB和AOF

待续



## 集群

关键字：主从同步；哨兵



## 分布式锁


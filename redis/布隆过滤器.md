# 布隆过滤器

工作原理：

1. 添加元素，对给定元素进行几轮不同的hash函数运算，得到几个不同的值（为数组对应的下标），接着根据不同的索引下标，设置所在的数组位置的值为1.

![布隆过滤器](布隆过滤器-1.png)



2. 判断元素是否存在

将新增元素进行上述几轮hash运算，分别计算出对应的索引下标，判断其所在位置的地方是否为1，如果存在一个不是为1，那么该元素一定不存在于过滤器中，否则，该元素可能存在。

3. 优缺点

   优点，二进制数组的设计，占用内存小，插入和查询速度快

   缺点，随着数据的增加，会导致hash函数计算出现误判，数据碰撞增加。并且存在无法删除数据的问题。



引用1: [记一篇REDIS布隆过滤器的使用 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/89883126)

问题总结：

1. qps的预估，需要考虑项目的业务发展情况，去评估最大并发量
2. 布隆过滤器方案的通用性，使用官方的组件来实现布隆过滤器，可能会存在和阿里云redis版本不兼容的问题，或者迁移过程存在版本问题的风险。（如果使用bitmap+偏移量,hash算法需要自行实现）
3. 业务抽象能力，对特定的业务场景用合适的数据结构来解决，对业务抽象出具体的解决方案。需要具有数据结构和算法的理解和掌握能力。
# 局部变量表 — 虚拟机栈

概念：

* 通过数字数组实现，存储方法参数和定义在方法体内的局部变量（包括基本数据类型，对象引用和returnAddress类型）
* 为线程私有，不存在线程安全问题
* 局部变量表的容量在编译期就确定下来。
* 栈的大小决定了方法嵌套的调用次数
* 局部变量表中的变量只在当前方法调用中有效，在方法执行的过程中，通过使用局部变量表来实现参数值到参数变量列表的传递过程，并随着栈帧的销毁而销毁。



代码示例：

```java
public class LocalVariablesTable {

    public static void main(String[] args) {
        LocalVariablesTable table = new LocalVariablesTable();
        int a = 1;
    }
}
```

![image-局部变量表](局部变量表.png)

![image-字节码解读局部变量表](字节码解读局部变量表.png)

存放了编译期可知的各种Java虚拟机的基本数据类型，对象引用和returnAddress类型（指向一条字节码指令的地址）。这些数据类型在局部变量表中以局部变量槽的形式体现，其中64位长度的long和double类型占用2个slot槽，其余占用1个slot。局部变量表在编译期就完成分配，当进入一个方法时，这个方法需要在栈帧中分配多大的局部变量空间时完全确定的。